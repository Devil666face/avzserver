package view

templ authorityField(m Map) {
	<input
		name="authority"
		autocapitalize="none"
		autocomplete="authority"
		class="form-control"
		value={ m.getUser().Authority }
		placeholder
		required
	/>
	<label for="floatingInput">
		@emoji("üè¢") {
			–û–∫—Ä—É–≥/–¶–û–í–£
		}
	</label>
}

templ unitField(m Map) {
	<input
		name="unit"
		autocapitalize="none"
		autocomplete="unit"
		class="form-control"
		value={ m.getUser().Unit }
		placeholder
		required
	/>
	<label for="floatingInput">
		@emoji("üèõ") {
			–í—á/–í–æ–µ–Ω–Ω—ã–π –∫–æ–º–∏—Å—Å–∞—Ä–∏–∞—Ç
		}
	</label>
}

templ passwordConfirmField() {
	<input
		type="password"
		name="password_confirm"
		autocomplete="current-password"
		class="form-control"
		placeholder
		required
	/>
	<label for="floatingPassword">
		@emoji("üîè") {
			–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
		}
	</label>
}

templ extraStylePassword() {
	<style type="text/css">
	.form-signin input[name="password"] {
	  min-width: 330px;
	  border-bottom-right-radius: 0;
	  border-bottom-left-radius: 0;
	  border-top-left-radius: 0;
	  border-top-right-radius: 0;
	}
	</style>
}

templ Register(v *View, m Map) {
	@baseAuth("Register") {
		@extraStylePassword()
		@FloatingAlert(m)
		<form
			hx-post={ v.URL("register") }
			hx-push-url={ v.URL("login") }
			hx-swap="outerHTML"
			hx-target="#auth_form"
			hx-select="#auth_form"
			enctype="multipart/form-data"
		>
			<h1 class="h3 mb-3 fw-normal text-success">
				@emoji("üÜï") {
					–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
				}
			</h1>
			@formFields(
				emailField(m),
				authorityField(m),
				unitField(m),
				passwordField(),
				passwordConfirmField(),
			)
			<button
				class={ authButtonClass() }
				type="submit"
			>
				@emoji("üë§") {
					–°–æ–∑–¥–∞—Ç—å
				}
			</button>
		</form>
		@Token(v.CsrfToken())
	}
}
