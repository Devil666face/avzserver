package view

templ userFromField(label string) {
	<div class="mb-1">
		<label>{ label }</label>
		{ children... }
	</div>
}

templ userFormCheck(label, name  string, checked bool) {
	<div class="form-check form-switch mb-1">
		<input
			class="form-check-input"
			type="checkbox"
			role="switch"
			name={ name }
			value="true"
			if checked {
				checked
			}
		/>
		<label class="form-check-label">{ label }</label>
	</div>
}

templ UserForm(v *View, m Map) {
	@Token(v.CsrfToken())
	<div class="modal-body">
		@Alert(m)
		@userFromField("ğŸ“§ Email") {
			<input
				name="email"
				required
				placeholder="Email"
				value={ m.getUser().Email }
				type="email"
				autofocus
				class="form-control"
			/>
		}
		@userFromField("ğŸ”’ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ") {
			<input
				name="password"
				type="password"
				value=""
				class="form-control"
				autocomplete="new-password"
				if m.notUser() {
					required
					placeholder="ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ"
				} else {
					placeholder="ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ"
				}
			/>
		}
		@userFromField("ğŸ” ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ") {
			<input
				name="password_confirm"
				type="password"
				value=""
				class="form-control"
				autocomplete="new-password"
				if m.notUser() {
					required
					placeholder="ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ"
				} else {
					placeholder="ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ"
				}
			/>
		}
		@userFromField("ğŸ¢ ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£") {
			<input
				name="authority"
				required
				placeholder="ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£"
				value={ m.getUser().Authority }
				autofocus
				class="form-control"
			/>
		}
		@userFromField("ğŸª– Ğ’Ğ¾Ğ¹ÑĞºĞ¾Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ") {
			<input
				name="unit"
				required
				placeholder="Ğ’Ğ¾Ğ¹ÑĞºĞ¾Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ"
				value={ m.getUser().Unit }
				autofocus
				class="form-control"
			/>
		}
		@userFormCheck("ğŸ‘¨â€ğŸ”§ ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€","admin",m.getUser().Admin)
		@userFormCheck("âœ… ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½","active",m.getUser().Active)
		<div class="modal-footer">
			<input
				type="submit"
				class="btn btn-outline-secondary form-control"
				if v.IsURL("user_create") {
					value="ğŸ†• Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ"
				} else {
					value="ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ"
				}
			/>
		</div>
	</div>
}

templ UserFormCommon(v *View, m Map) {
	@Token(v.CsrfToken())
	<div class="modal-body">
		@Alert(m)
		@userFromField("ğŸ”’ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ") {
			<input
				name="password"
				type="password"
				value=""
				class="form-control"
				autocomplete="new-password"
				placeholder="ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ"
			/>
		}
		@userFromField("ğŸ” ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ") {
			<input
				name="password_confirm"
				type="password"
				value=""
				class="form-control"
				autocomplete="new-password"
				placeholder="ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ"
			/>
		}
		@userFromField("ğŸ¢ ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£") {
			<input
				name="authority"
				required
				placeholder="ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£"
				value={ v.CurrentUser().Authority }
				autofocus
				class="form-control"
			/>
		}
		@userFromField("ğŸª– Ğ’Ğ¾Ğ¹ÑĞºĞ¾Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ") {
			<input
				name="unit"
				required
				placeholder="Ğ’Ğ¾Ğ¹ÑĞºĞ¾Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ"
				value={ v.CurrentUser().Unit }
				autofocus
				class="form-control"
			/>
		}
		<div class="modal-footer">
			<input
				type="submit"
				class="btn btn-outline-secondary form-control"
				value="ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ"
			/>
		</div>
	</div>
}
