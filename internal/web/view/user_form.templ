package view

templ userFormField(label string) {
	<div class="form-floating">
		{ children... }
		<label>{ label }</label>
	</div>
}

templ userFormCheck(label, name  string, checked bool) {
	<div class="form-check form-switch mt-1">
		<input
			class="form-check-input"
			type="checkbox"
			role="switch"
			name={ name }
			value="true"
			if checked {
				checked
			}
		/>
		<label class="form-check-label">{ label }</label>
	</div>
}

templ UserForm(v *View, m Map) {
	@Token(v.CsrfToken())
	<div class="modal-body">
		@Alert(m)
		@userFormField("ğŸ“§ Email") {
			<input
				name="email"
				value={ m.getUser().Email }
				type="email"
				class="form-control"
				required
				autofocus
				placeholder
			/>
		}
		@userFormField("ğŸ”’ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ") {
			<input
				name="password"
				type="password"
				class="form-control"
				autocomplete="new-password"
				placeholder
				if m.notUser() {
					required
				}
			/>
		}
		@userFormField("ğŸ” ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ") {
			<input
				name="password_confirm"
				type="password"
				class="form-control"
				autocomplete="new-password"
				placeholder
				if m.notUser() {
					required
				}
			/>
		}
		@userFormField("ğŸ¢ ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£") {
			<input
				name="authority"
				value={ m.getUser().Authority }
				class="form-control"
				required
				placeholder
			/>
		}
		@userFormField("ğŸª– Ğ’Ñ‡/Ğ’Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ°Ñ€Ğ¸Ğ°Ñ‚") {
			<input
				name="unit"
				value={ m.getUser().Unit }
				class="form-control"
				required
				placeholder
			/>
		}
		@userFormCheck("ğŸ‘¨â€ğŸ”§ ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€","admin",m.getUser().Admin)
		@userFormCheck("âœ… ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½","active",m.getUser().Active)
		if !v.IsURL("user_create") {
			<div class="form-text">ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ»Ğµ Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¼ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼Ğ¸, ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ĞµĞ³Ğ¾ Ğ¼ĞµĞ½ÑÑ‚ÑŒ</div>
		}
		<div class="modal-footer">
			<input
				type="submit"
				class="btn btn-outline-secondary form-control"
				if v.IsURL("user_create") {
					value="ğŸ†• Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ"
				} else {
					value="ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ"
				}
			/>
		</div>
	</div>
}

templ UserFormCommon(v *View, m Map) {
	@Token(v.CsrfToken())
	<div class="modal-body">
		@Alert(m)
		@userFormField("ğŸ”’ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ") {
			<input
				name="password"
				type="password"
				class="form-control"
				autocomplete="new-password"
				placeholder
			/>
		}
		@userFormField("ğŸ” ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ") {
			<input
				name="password_confirm"
				type="password"
				class="form-control"
				autocomplete="new-password"
				placeholder
			/>
		}
		@userFormField("ğŸ¢ ĞĞºÑ€ÑƒĞ³/Ğ¦ĞĞ’Ğ£") {
			<input
				name="authority"
				value={ v.CurrentUser().Authority }
				class="form-control"
				placeholder
				required
				autofocus
			/>
		}
		@userFormField("ğŸª– Ğ’Ğ¾Ğ¹ÑĞºĞ¾Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ") {
			<input
				name="unit"
				value={ v.CurrentUser().Unit }
				class="form-control"
				placeholder
				required
				autofocus
			/>
		}
		<div class="form-text">ĞÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ»Ğµ Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¼ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼Ğ¸, ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ĞµĞ³Ğ¾ Ğ¼ĞµĞ½ÑÑ‚ÑŒ</div>
		<div class="modal-footer mt-2">
			<input
				type="submit"
				class="btn btn-outline-secondary form-control"
				value="ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ"
			/>
		</div>
	</div>
}
